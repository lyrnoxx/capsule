/* ────────────────────────────────────────────────────────
   Logger – Dark-theme habit tracker with progress rings
   ──────────────────────────────────────────────────────── */

/* === Reset & Tokens === */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root {
  --bg:       #0b0e14;
  --surface:  #131820;
  --border:   #1e2632;
  --text:     #c5cdd9;
  --text-dim: #6b7a8d;
  --accent:   #60a5fa;
  --glow:     rgba(96,165,250,.35);

  /* progress colour stops (dynamically set per card via JS) */
  --ring-c1:  #f87171;   /* red   – low  */
  --ring-c2:  #fbbf24;   /* amber – mid  */
  --ring-c3:  #34d399;   /* green – high */
  --ring-c4:  #facc15;   /* gold  – 100% */

  --radius:   14px;
  --font:     'Inter', system-ui, -apple-system, sans-serif;
}

html { font-size: 16px; }
body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }

/* === Topbar === */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .75rem 1.5rem;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 50;
}
.logo { font-weight: 700; font-size: 1.25rem; color: var(--text); letter-spacing: -.5px; }
.logo:hover { text-decoration: none; color: var(--accent); }

.topbar-right { display: flex; align-items: center; gap: .6rem; }
.topbar-user { font-size: .8rem; color: var(--text-dim); font-weight: 600; }

/* === Container === */
.container { max-width: 1100px; margin: 0 auto; padding: 2rem 1.25rem; }

/* === Buttons === */
.btn {
  display: inline-flex; align-items: center; gap: .35rem;
  padding: .5rem 1.1rem;
  border: none; border-radius: 8px;
  font-size: .875rem; font-weight: 600;
  cursor: pointer;
  transition: transform .15s, box-shadow .25s, background .2s;
}
.btn:active { transform: scale(.96); }

.btn-glow {
  background: var(--accent);
  color: #0b0e14;
  box-shadow: 0 0 16px var(--glow);
}
.btn-glow:hover { box-shadow: 0 0 28px var(--glow); }

.btn-outline {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
}
.btn-outline:hover { border-color: var(--accent); color: var(--accent); }

.btn-danger { background: #dc2626; color: #fff; }
.btn-danger:hover { background: #ef4444; }

.btn-sm { padding: .35rem .85rem; font-size: .8rem; }
.btn-full { width: 100%; justify-content: center; padding: .7rem; }

/* === Page Title === */
.page-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; }

/* === Empty state === */
.empty-state {
  text-align: center; padding: 3rem 1rem;
  color: var(--text-dim);
}
.empty-state .btn { margin-top: 1rem; }

/* ─────────────────────────────────────────────────────────
   ITEMS GRID
   ───────────────────────────────────────────────────────── */
.items-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 1.5rem;
}

.item-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem 1.25rem 1.25rem;
  display: flex; flex-direction: column; align-items: center;
  gap: .75rem;
  transition: border-color .3s, box-shadow .3s;
}
.item-card:hover {
  border-color: var(--accent);
  box-shadow: 0 0 20px rgba(96,165,250,.1);
}

/* ─────────────────────────────────────────────────────────
   PROGRESS RING VISUAL
   ───────────────────────────────────────────────────────── */
.ring-wrapper {
  position: relative;
  width: 170px; height: 170px;
}
.ring-wrapper.ring-lg {
  width: 240px; height: 240px;
}

.ring-svg { width: 100%; height: 100%; }

.ring-track {
  fill: none;
  stroke: var(--border);
  stroke-width: 8;
}

.ring-progress {
  fill: none;
  stroke-width: 10;
  stroke-linecap: round;
  transform: rotate(-90deg);
  transform-origin: center;
  transition: stroke-dashoffset .8s cubic-bezier(.4,0,.2,1);
}

/* Gradient stops — updated per card by JS based on progress */
.ring-stop-1 { stop-color: var(--ring-c1); }
.ring-stop-2 { stop-color: var(--ring-c2); }

.ring-pct {
  font-size: 1.6rem;
  font-weight: 700;
  fill: var(--text);
  text-anchor: middle;
  dominant-baseline: central;
}
.ring-val {
  font-size: .7rem;
  fill: var(--text-dim);
  text-anchor: middle;
}

/* ── Pulse animation on log ── */
@keyframes ring-pulse {
  0%   { stroke-width: 10; filter: brightness(1); }
  50%  { stroke-width: 16; filter: brightness(1.5); }
  100% { stroke-width: 10; filter: brightness(1); }
}
.ring-progress.pulse {
  animation: ring-pulse .5s ease-out;
}

/* ── Particle burst ── */
.particles {
  position: absolute; inset: 0;
  pointer-events: none;
  overflow: hidden;
  border-radius: 50%;
}
.particle {
  position: absolute;
  width: 4px; height: 4px;
  border-radius: 50%;
  background: var(--accent);
  opacity: 0;
}
@keyframes particle-burst {
  0%   { transform: translate(0,0) scale(1); opacity: 1; }
  100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
}
.particle.burst {
  animation: particle-burst .7s ease-out forwards;
}

/* ─── Card text ─── */
.item-name { font-size: 1.05rem; font-weight: 600; }
.item-name a { color: var(--text); }
.item-name a:hover { color: var(--accent); text-decoration: none; }

.item-meta { display: flex; gap: .5rem; }

.badge {
  font-size: .7rem; padding: .2rem .55rem;
  border-radius: 999px;
  font-weight: 600;
  background: var(--border); color: var(--text-dim);
}
.badge-streak { background: #451a03; color: #fbbf24; }

.log-row {
  display: flex; gap: .5rem;
  width: 100%; margin-top: auto;
}
.log-amount {
  flex: 1;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: .45rem .6rem;
  font-size: .85rem;
  color: var(--text);
  font-family: var(--font);
  outline: none;
  transition: border-color .2s;
  min-width: 0;
}
.log-amount:focus { border-color: var(--accent); }
.log-amount::placeholder { color: var(--text-dim); font-size: .75rem; }
.log-row .btn-log { flex: none; }
.detail-actions .log-amount { max-width: 120px; }

/* ─────────────────────────────────────────────────────────
   DETAIL PAGE
   ───────────────────────────────────────────────────────── */
.back-link {
  display: inline-block;
  margin-bottom: 1.25rem;
  color: var(--text-dim);
  font-size: .85rem;
}

.detail-header {
  display: flex; gap: 2.5rem;
  align-items: flex-start;
  flex-wrap: wrap;
  margin-bottom: 2rem;
}
.detail-info { flex: 1; min-width: 260px; }
.detail-info h1 { font-size: 1.8rem; margin-bottom: .5rem; }
.detail-info .desc { color: var(--text-dim); margin-bottom: 1rem; }

.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: .75rem;
  margin-bottom: 1.5rem;
}
.stat {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .65rem .85rem;
}
.stat-label { display: block; font-size: .7rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: .5px; }
.stat-value { font-size: 1.15rem; font-weight: 700; }

.detail-actions { display: flex; gap: .75rem; flex-wrap: wrap; }
.inline-form { display: inline; }

/* ─── Log history table ─── */
.log-history h2 { font-size: 1.15rem; margin-bottom: .75rem; }

.log-table {
  width: 100%;
  border-collapse: collapse;
}
.log-table th, .log-table td {
  text-align: left;
  padding: .55rem .75rem;
  border-bottom: 1px solid var(--border);
  font-size: .85rem;
}
.log-table th { color: var(--text-dim); font-weight: 600; text-transform: uppercase; font-size: .7rem; letter-spacing: .5px; }

/* ─────────────────────────────────────────────────────────
   FORM PAGE
   ───────────────────────────────────────────────────────── */
.form-page { max-width: 520px; }
.form-page h1 { font-size: 1.4rem; margin-bottom: 1.25rem; }

.item-form { display: flex; flex-direction: column; gap: 1rem; }
.item-form label { display: flex; flex-direction: column; gap: .3rem; }
.item-form label span { font-size: .75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: .5px; font-weight: 600; }

.item-form input,
.item-form select,
.item-form textarea {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: .55rem .75rem;
  font-size: .95rem;
  color: var(--text);
  font-family: var(--font);
  outline: none;
  transition: border-color .2s;
}
.item-form input:focus,
.item-form select:focus,
.item-form textarea:focus {
  border-color: var(--accent);
}

.form-row { display: flex; gap: 1rem; }
.form-row label { flex: 1; }

.item-form .btn { margin-top: .5rem; }

/* ─────────────────────────────────────────────────────────
   AUTH PAGES
   ───────────────────────────────────────────────────────── */
.auth-page {
  display: flex; justify-content: center; align-items: center;
  min-height: 70vh;
}
.auth-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2.5rem 2rem;
  width: 100%; max-width: 400px;
  text-align: center;
}
.auth-card h1 { font-size: 1.5rem; margin-bottom: 1.5rem; }

.auth-form { display: flex; flex-direction: column; gap: 1rem; text-align: left; }
.auth-form label { display: flex; flex-direction: column; gap: .3rem; }
.auth-form label span {
  font-size: .75rem; color: var(--text-dim);
  text-transform: uppercase; letter-spacing: .5px; font-weight: 600;
}
.auth-form input {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: .6rem .75rem;
  font-size: .95rem;
  color: var(--text);
  font-family: var(--font);
  outline: none;
  transition: border-color .2s;
}
.auth-form input:focus { border-color: var(--accent); }
.auth-form .btn { margin-top: .5rem; }

.auth-switch {
  margin-top: 1.25rem;
  font-size: .85rem;
  color: var(--text-dim);
}

/* ─── Flash messages ─── */
.flash {
  padding: .6rem .85rem;
  border-radius: 8px;
  font-size: .85rem;
  margin-bottom: .75rem;
}
.flash-error {
  background: rgba(220,38,38,.15);
  border: 1px solid rgba(220,38,38,.3);
  color: #fca5a5;
}
.flash-info {
  background: rgba(96,165,250,.12);
  border: 1px solid rgba(96,165,250,.25);
  color: var(--accent);
}

/* ─── Responsive ─── */
@media (max-width: 640px) {
  .detail-header { flex-direction: column; align-items: center; text-align: center; }
  .stats-grid { grid-template-columns: 1fr 1fr; }
  .form-row { flex-direction: column; gap: 1rem; }
  .topbar-right { gap: .35rem; }
}
